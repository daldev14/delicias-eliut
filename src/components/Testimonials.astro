---
import IconStart from "@/components/icons/Star.astro";

import "keen-slider/keen-slider.min.css";

const MESSAGES = [
  {
    client: "Ismera Sogal",
    stars: 5,
    message:
      "La mejor comida ,con sabor unico ,olor color y textural,como su nombre lo indica  es una delicia ,comidas  bebidas y platos tipicos ...5 estrellas  dedicada con eemero amabilidad y respeto a sus clientes, yo la recomiendo un 100% y clientes sastifescho , burn provecho. ,felicidades y bendiciones  a comidas Delicias ğŸ˜˜â¤ğŸ™",
  },
  {
    client: "Lucy Paret",
    stars: 5,
    message:
      "Comida nutritiva de alta calidad preparada con esmero y dedicaciÃ³n y sobre todo con mucho amor. No te pierdas de probar  las delicias Eliut serÃ¡ una experiencia agradable a tu paladar Felicidades muchas bendiciones",
  },
  ,
  {
    client: "Susy Valladares",
    stars: 5,
    message:
      "Enhorabuena Eliut la mejor comida catracha su sazonğŸ§‚ de lo mejor tengo muchos aÃ±os de conocerla y de saborear esos deliciosos platos ğŸ˜ƒğŸ½ğŸ§‚ Deli! Siga adelante Dios la Bendiga y siga cosechando Ã‰xitos! ğŸ‘©ğŸ»â€ğŸ³ğŸ‘ğŸ» ğŸ˜ƒ",
  },
];
---

<div class="py-12 lg:py-16">
  <div class="max-w-7xl items-end justify-between sm:flex sm:pe-6 lg:pe-8">
    <h2
      class="max-w-2xl text-4xl font-bold tracking-tight text-gray-900 sm:text-5xl"
    >
      Lea las opiniones de confianza de nuestros clientes
    </h2>

    <div class="mt-8 flex gap-4 lg:mt-0">
      <button
        aria-label="Previous slide"
        id="keen-slider-previous"
        class="rounded-full border border-emerald-600 p-3 text-emerald-600 transition hover:bg-emerald-600 hover:text-white"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-5 rtl:rotate-180"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M15.75 19.5L8.25 12l7.5-7.5"></path>
        </svg>
      </button>

      <button
        aria-label="Next slide"
        id="keen-slider-next"
        class="rounded-full border border-emerald-600 p-3 text-emerald-600 transition hover:bg-emerald-600 hover:text-white"
      >
        <svg
          class="size-5 rtl:rotate-180"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M9 5l7 7-7 7"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"></path>
        </svg>
      </button>
    </div>
  </div>

  <div class="-mx-6 mt-8 lg:col-span-2 lg:mx-0">
    <div id="keen-slider" class="keen-slider">
      {
        MESSAGES.map((item) => {
          let count = item?.stars ?? 0;
          return (
            <div class="keen-slider__slide">
              <blockquote class="flex h-full flex-col justify-between bg-white p-6 shadow-sm sm:p-8 lg:p-12">
                <div>
                  <div class="flex gap-0.5">
                    {[...Array(5)].map((_) => {
                      if (count > 0) {
                        count--;
                        return <IconStart class="size-5 text-green-500" />;
                      }

                      return <IconStart class="size-5 text-gray-500" />;
                    })}
                  </div>

                  <div class="mt-4">
                    <p class="text-2xl font-bold sm:text-3xl">{item?.client}</p>

                    <p class="mt-4 leading-relaxed text-pretty text-gray-700">
                      {item?.message}
                    </p>
                  </div>
                </div>
              </blockquote>
            </div>
          );
        })
      }
    </div>
  </div>
</div>

<script>
  import KeenSlider from "keen-slider";

  const keenSlider = new KeenSlider(
    "#keen-slider",
    {
      loop: true,
      slides: {
        origin: "center",
        perView: 1.25,
        spacing: 16,
      },
      breakpoints: {
        "(min-width: 1024px)": {
          slides: {
            origin: "auto",
            perView: 2.5,
            spacing: 32,
          },
        },
      },
    },
    []
  );

  const keenSliderPrevious = document.getElementById("keen-slider-previous");
  const keenSliderNext = document.getElementById("keen-slider-next");

  keenSliderPrevious?.addEventListener("click", () => keenSlider.prev());
  keenSliderNext?.addEventListener("click", () => keenSlider.next());
</script>
